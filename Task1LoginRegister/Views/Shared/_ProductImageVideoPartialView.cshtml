@model Task1LoginRegister.Models.Product

@if (Model.ProductImages != null && Model.ProductImages.Any())
{
    var primaryMedia = Model.ProductImages.FirstOrDefault(img => img.IsPrimaryImage);
    if (primaryMedia != null)
    {
        var fileExtension = System.IO.Path.GetExtension(primaryMedia.ImageUrl)?.ToLower();

        if (fileExtension == ".jpg" || fileExtension == ".jpeg" || fileExtension == ".png" || fileExtension == ".gif" || fileExtension == ".webp")
        {
            // Display image
            <img src="@primaryMedia.ImageUrl" class="product-image img-fluid card-img-top rounded-3" alt="Primary Product Image">
        }
        else if (fileExtension == ".mp4" || fileExtension == ".webm" || fileExtension == ".ogg")
        {
                        // Display video
            <video class="product-video img-fluid product-image card-img-top rounded-3" controls autoplay loop>
                <source src="@primaryMedia.ImageUrl" type="video/@fileExtension.Substring(1)">
                Your browser does not support the video tag.
            </video>
        }

    }
}