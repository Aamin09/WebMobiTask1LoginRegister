@model Task1LoginRegister.Models.CategorySubcategoryViewModel

<h2 class="text-center text-primary my-4">Edit Category and Subcategories</h2>

<div class="card shadow-lg p-4">
    <form method="post" asp-action="EditPost">

        <!-- Category Section -->
        <div class="mb-4">
            <h3 class="text-dark fw-bold">Category</h3>
            <div class="form-group">
                <label asp-for="Category.Name" class="fw-semibold"></label>
                <input asp-for="Category.Name" class="form-control border-2 border-primary bg-light-subtle shadow-sm" />
                <span asp-validation-for="Category.Name" class="text-danger"></span>
            </div>
            <input type="hidden" asp-for="Category.CategoryId" />
        </div>

        <!-- Subcategories Section -->
        <h3 class="text-dark fw-bold">Subcategories</h3>
        <div class="table-responsive">
            <table class="table table-bordered table-hover shadow-sm">
                <thead class="table-dark">
                    <tr>
                        <th class="text-center">Subcategory Name</th>
                        <th class="text-center">Action</th>
                    </tr>
                </thead>
                <tbody>
                    @for (int i = 0; i < Model.Subcategories.Count; i++)
                    {
                        var subcategory = Model.Subcategories[i];
                        <tr>
                            <td>
                                <input type="hidden" name="ExistingSubcategoryIds[@i]" value="@subcategory.SubcategoryId" />
                                <input type="text" name="updatedSubcategoryNames[@i]" value="@subcategory.Name" class="form-control" />
                            </td>
                            <td class="text-center">
                                <input type="checkbox" name="SubcategoryIdsToRemove" value="@subcategory.SubcategoryId" class="form-check-input" />
                                <label class="ms-2 text-danger fw-semibold">Remove</label>
                            </td>
                        </tr>
                    }

                    <!-- Row for Adding New Subcategories -->
                    <tr class="table-success">
                        <td>
                            <input type="text" name="NewSubcategoryNames" class="form-control bg-light shadow-sm" placeholder="Enter new subcategory (optional)" />
                        </td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Submit Button -->
        <div class="text-center mt-4">
            <button type="submit" class="btn btn-lg btn-primary px-4 shadow">Save Changes</button>
            <a asp-action="Index" class="btn btn-lg btn-secondary px-4 shadow">Cancel</a>
        </div>
    </form>
</div>
