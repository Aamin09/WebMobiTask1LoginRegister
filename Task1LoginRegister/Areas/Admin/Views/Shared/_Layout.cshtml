@inject Task1LoginRegister.Services.UserService UserService
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Admin Dashboard</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Task1LoginRegister.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
    @* toggle button for sidebar *@
    <button class="btn" id="sidebarToggle"><i class="fas fa-times"></i></button>

    @* sidebar  *@
    <div id="sidebar-wrapper">
        <div class="sidebar-brand">
            <i class="fas fa-store fa-2x text-white"></i>
            <div class="sidebar-brand-text mx-3">Admin Panel</div>
        </div>
        <hr class="sidebar-divider" />

        <div class="sidebar-heading">
            Core
        </div>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" asp-action="Index" asp-controller="Home" asp-area="Admin">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
        </ul>

        <hr class="sidebar-divider" />

        <div class="sidebar-heading">
            Shop Management
        </div>
        <ul class="nav flex-column">
            <li class="nav-item has-dropdown">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-folder"></i>
                    <span>Categories</span>
                    <i class="fas fa-angle-down ml-auto"></i>

                </a>
                <ul class="nav-dropdown">
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="CategorySubcategory" asp-action="Index">
                            <span>All Categories</span>
                        </a>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="CategorySubcategory" asp-action="Create">
                            <span>Add New Category</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item has-dropdown">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-box"></i>
                    <span>Products</span>
                    <i class="fas fa-angle-down ml-auto"></i>
                </a>
                <ul class="nav-dropdown">
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="Products" asp-action="Index">
                            <span>All Products</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="Products" asp-action="Create">
                            <span>Add New Product</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item has-dropdown">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-shopping-cart"></i>
                    <span>Orders</span>
                    <i class="fas fa-angle-down ml-auto"></i>
                </a>
                <ul class="nav-dropdown">
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="AdminOrders" asp-action="Index">
                            <span>All Orders</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="AdminOrders" asp-action="Pending">
                            <span>Pending Orders</span>
                        </a>
                    </li>
                </ul>
            </li>

            <li class="nav-item has-dropdown">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-chart-line"></i>
                    <span>Reports</span>
                    <i class="fas fa-angle-down ml-auto"></i>
                </a>
                <ul class="nav-dropdown">
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="Report" asp-action="Index">
                            <span>All Reports</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="AdminOrders" asp-action="Pending">
                            <span>Pending Orders</span>
                        </a>
                    </li>
                </ul>
            </li>

        </ul>

        <hr class="sidebar-divider">
        <div class="sidebar-heading">
            Payment Management
        </div>

        <ul class="nav flex-column">
            <li class="nav-item has-dropdown">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-receipt"></i>
                    <span>Taxes</span>
                    <i class="fas fa-angle-down ml-auto"></i>
                </a>
                <ul class="nav-dropdown">
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="GstTaxes" asp-action="Index">
                            <span>All Taxes Details</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Admin" asp-controller="GstTaxes" asp-action="Create">
                            <span>Add Tax</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item has-dropdown">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-credit-card"></i>
                    <span>Payments</span>
                    <i class="fas fa-angle-down ml-auto"></i>
                </a>
                <ul class="nav-dropdown">
                    <li class="nav-item">
                        <a class="nav-link" asp-area="" asp-controller="Payment" asp-action="RazorpayPaymentList">
                            <span>View Online Payments</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="" asp-controller="Refund" asp-action="ManageRefunds">
                            <span>Manage Refunds</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>

        <hr class="sidebar-divider">

        <div class="sidebar-heading">
            Settings
        </div>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Privacy">
                    <i class="fas fa-fw fa-lock"></i>
                    <span>Privacy</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
        </ul>

        <hr class="sidebar-divider">

    </div>

    @* Content Wrapper *@
    <div id="content-wrapper">
        @* top navigation *@     
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 shadow-sm">

            <div class="d-flex flex-sm-row">
                <a class="navbar-brand" asp-area="Admin" asp-action="Index" asp-controller="Home">
                    <img src="~/Images/logo.png" class="img-fluid navbar-logo align-middle" alt="Store Logo" style="max-height: 40px; width: auto;">
                </a>
                <form class="d-none d-sm-inline-block form-check-inline mr-auto ml-md-3 my-2 my-md-0 navbar-search">
                    <div class="input-group">
                        <input type="text" class="form-control bg-light border-1 small" placeholder="Search for..." aria-label="Search" />
                        <i class="fas fa-search"></i>
                    </div>
                </form>
            </div>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item dropdown no-arrow mx-1">
                    <a class="nav-link dropdown-toggle" href="#" id="alertsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-bell fa-fw"></i>
                        <span class="badge bg-danger rounded-pill"> 3+</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="alertDropdown">
                        <h6 class="dropdown-header">Notification Center</h6>
                        <a class="dropdown-item d-flex align-items-center" href="#">
                            <div class="me-3">
                                <div class="rounded-circle bg-primary p-2">
                                    <i class="fas fa-file-alt text-white"></i>
                                </div>
                            </div>
                            <div>
                                <div class="small text-gray-500">March 10, 2025</div>
                                <span>New order has been placed!</span>
                            </div>
                        </a>
                        <a class="dropdown-item text-center small text-gray-500" href="#">Show All Alerts</a>
                    </div>
                </li>
                <div class="topbar-divider d-none d-sm-block"></div>

                <li class="nav-item dropdown no-arrow">
                    <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <span class="d-lg-inline text-gray-600 me-2">@UserService.GetUserName()</span>
                        <img class="img-profile rounded-circle" style="width: 32px; height: 32px;" src="~/images/@UserService.GetUserImageAsync()">
                    </a>
                    <div class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="userDropdown">
                        <a class="dropdown-item" asp-area="Admin" asp-action="Details" asp-controller="Home" asp-route-id="@UserService.GetUserId().ToString()">
                            <i class="fas fa-user fa-sm fa-fw me-2 text-gray-400"></i>
                            Profile
                        </a>
                        <a class="dropdown-item" href="#">
                            <i class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>
                            Settings
                        </a>
                        <div class="dropdown-divider"></div>
                        <form asp-controller="Account" asp-area="" asp-action="Logout" method="post">
                            <button type="submit" class="dropdown-item">
                                <i class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>
                                Logout
                            </button>
                        </form>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div id="main-content" class="container-fluid mb-5">
            @RenderBody()
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="container my-auto">
                <div class="text-center">
                    <span>&copy; 2025 - Your E-commerce Admin Dashboard</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <script>
        $(document).ready(function() {
            // Toggle sidebar
             $("#sidebarToggle").on('click', function(e) {
            e.preventDefault();
            $("#sidebar-wrapper").toggleClass("collapsed mobile-show");
            $("#content-wrapper").toggleClass("expanded");

            // Change icon based on sidebar state
            if ($("#sidebar-wrapper").hasClass("collapsed")) {
                $(this).html('<i class="fas fa-bars"></i>');
                $(this).css('left', '10px');
            } else {
                $(this).html('<i class="fas fa-times"></i>');
                $(this).css('left', 'calc(var(--sidebar-width) - 20px)');
            }
        });


            // Toggle dropdowns in sidebar
            $(".nav-item.has-dropdown > .nav-link").on('click', function(e) {
                e.preventDefault();
                $(this).parent().toggleClass("open");
            });

                 // Close sidebar on small screens when clicking outside
        $(document).on('click', function(e) {
            if ($(window).width() < 768) {
                if (!$(e.target).closest('#sidebar-wrapper').length && !$(e.target).closest('#sidebarToggle').length) {
                    $("#sidebar-wrapper").removeClass("mobile-show");
                    $("#sidebarToggle").html('<i class="fas fa-bars"></i>');
                    $("#sidebarToggle").css('left', '10px');
                }
            }
        });

            // Initialize DataTables if present
            if ($.fn.DataTable) {
                $('.dataTable').DataTable();
            }
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>